#include<stdio.h>


struct Item {
	double price;
	int sku;
	int isTaxed;
	int quantity;
	int minQuantity;
	char name[21];
};



//PART 2 started

double totalAfterTax(struct Item item) {
	double totalAfterTax = 0;

	if (item.isTaxed == 1) {
		//printf("Quanity: %d, Price: %.2lf", item.price, item.quantity);
		totalAfterTax = (item.price * item.quantity) * (1 + 0.13);
	}
	else if (item.isTaxed == 0) {
		totalAfterTax = (item.price * item.quantity);

	}

	return totalAfterTax;
}



int isLowQuantity(struct Item item) {

	int isLow = 0;

	if (item.quantity < item.minQuantity) {
		isLow = 1;
	}
	else if (item.quantity >= item.minQuantity) {
		isLow = 0;
	}

	return isLow;
}


struct Item itemEntry(int sku) {

	struct Item item;
	int done = 1;

	int i = 0;

	int j = 0;

	for (i = 0; i < 1; i++) {

		printf("        SKU: %d\n", sku);

		item.sku = sku;

		printf("       Name: ");
		scanf("%s", &item.name);
		flushKeyboard();

		printf("      Price: ");
		scanf(" %lf", &item.price);

		printf("   Quantity: ");
		scanf(" %d", &item.quantity);

		printf("Minimun Qty: ");
		scanf(" %d", &item.minQuantity);

		printf("   Is taxed: ");
		item.isTaxed = yes();

	}

	return item;
}


void displayItem(struct Item item, int linear) {

	double totalPrice;
	int lowQuantity;
	int taxDisplay = 0;

	totalPrice = totalAfterTax(item);
	lowQuantity = isLowQuantity(item);

	if (linear == 1) {

		if (lowQuantity == 0) {

			printf("|%3d|%-20s|%8.2lf|", item.sku, item.name, item.price);

			taxDisplay = item.isTaxed;

			if (taxDisplay == 1) {
				printf("  Yes|");
			}
			else if (taxDisplay == 0) {
				printf("   No|");
			}

			printf(" %3d | %3d |%12.2lf|\n", item.quantity, item.minQuantity, totalPrice);
		}

		else if (lowQuantity == 1) {

			printf("|%3d|%-20s|%8.2lf|", item.sku, item.name, item.price);


			taxDisplay = item.isTaxed;

			if (taxDisplay == 1) {
				printf("  Yes|");
			}
			else if (taxDisplay == 0) {
				printf("   No|");
			}


			printf(" %3d | %3d |%12.2lf|***\n", item.quantity, item.minQuantity, totalPrice);
		}
	}



	if (linear == 0) {

		if (lowQuantity == 0) {

			printf("        SKU: %d\n       Name: %s\n      Price: %.2lf\n    Quanity: %d\n", item.sku, item.name, item.price, item.quantity);
			printf("Minimun Qty: %d\n", item.minQuantity);

			taxDisplay = item.isTaxed;

			if (taxDisplay == 1) {
				printf("   Is Taxed: Yes\n");
			}
			else if (taxDisplay == 0) {
				printf("   Is Taxed: No\n");
			}
		}
		else if (lowQuantity == 1) {

			printf("        SKU: %d\n       Name: %s\n      Price: %.2lf\n    Quanity: %d\n", item.sku, item.name, item.price, item.quantity);
			printf("Minimun Qty: %d\n", item.minQuantity);

			taxDisplay = item.isTaxed;

			if (taxDisplay == 1) {
				printf("   Is Taxed: Yes\n");
			}
			else if (taxDisplay == 0) {
				printf("   Is Taxed: No\n");
			}

			printf("WARNING: Quantity low, please order ASAP!!!\n\n");

		}
	}
}

void listItems(const struct Item item[], int noOfItems) {

	double grandTotal = 0;

	int n = 0;
	//for (n = 0; n < noOfItems; n++) {
	//printf("----+---+--------------------+--------+-----+-----+-----+------------|---\n");
	//printf("|%3d|%3d|%20s|%8.2lf|  %3d| %3d |%3d  |%12.2lf|\n", 1, item[n].sku, item[n].name, item[n].price, item[n].isTaxed, item[n].quantity, item[n].minQuantity);

	//}

}

int locateItem(const struct Item item[], int NoOfRecs, int sku, int*index) {

	int i = 0;
	for (i = 0; i < NoOfRecs; i++) {

		//printf("item %d has sku: %d\n", i, item[i].sku);

		if (item[i].sku == sku) {
			i = *index;
			return index;
		}
	}

	return 0;
}



